---
// HeroSection.astro - Main hero section with magnetic text, particle trail, and liquid blobs
import FloatingShapesCanvas from '../features/FloatingShapesCanvas.astro';
import SoundEffectsProvider from '../providers/SoundEffectsProvider';
import '../lib/hero/init.js';
---

<section
  class="hero-section relative h-[calc(100vh-4rem)] flex items-center justify-center overflow-hidden"
>
  <SoundEffectsProvider client:load />
  <!-- Liquid blob background -->
  <div class="absolute inset-0 bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900">
    <div class="liquid-blobs absolute inset-0">
      <div class="blob blob-1"></div>
      <div class="blob blob-2"></div>
      <div class="blob blob-3"></div>
    </div>
  </div>

  <!-- Floating shapes canvas -->
  <FloatingShapesCanvas />

  <!-- Particle trail canvas -->
  <canvas id="particleTrail" class="absolute inset-0 w-full h-full pointer-events-none"></canvas>
  <!-- Laser overlay canvas -->
  <canvas
    id="heroLaser"
    class="absolute inset-0 w-full h-full pointer-events-none z-40 block"
    style="opacity: 0;"></canvas>

  <!-- Content -->
  <div
    class="relative z-10 text-center px-4 sm:px-6 lg:px-8 max-w-4xl mx-auto content-wrapper"
    style="isolation: isolate;"
  >
    <h1
      class="hero-title text-5xl sm:text-6xl lg:text-7xl font-bold mb-6 animate-slide-up bangers-font"
      style="text-shadow: 2px 2px 4px rgba(0,0,0,0.3), 0 0 20px rgba(0,0,0,0.5); text-transform: none; letter-spacing: 3px;"
    >
      <span
        class="magnetic-text"
        data-text="Stupid Web Tricks"
        style="color: #7661d1 !important; text-shadow: 2px 2px 4px rgba(0,0,0,0.5), 0 0 10px rgba(118, 97, 209, 0.3) !important;"
      >
        <span class="word word-stupid">Stupid</span>
        <span class="word word-web">Web</span>
        <span class="word word-tricks">Tricks</span>
      </span>
    </h1>
    <p
      class="hero-description text-xl sm:text-2xl text-gray-300 mb-8 animate-slide-up"
      style="animation-delay: 0.2s;"
    >
      Discover amazing web effects, animations,<br />
      and learn the techniques to create them!
    </p>
    <div class="animate-slide-up" style="animation-delay: 0.4s;">
      <a
        href="#categories"
        class="hero-button inline-flex items-center px-8 py-4 bg-gradient-to-r from-purple-600 to-blue-600 text-white font-semibold rounded-full hover:from-purple-700 hover:to-blue-700 transform hover:scale-105 transition-all duration-300 shadow-lg hover:shadow-xl cursor-pointer relative z-50"
      >
        Explore Tricks
        <svg class="ml-2 w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"
          ></path>
        </svg>
      </a>
    </div>
  </div>
</section>

<script>
  // All hero effects are now in separate modules
  // Imported via: import '../lib/hero/init.js';
</script>

<style>
  /* Hero button styling */
  .hero-button {
    position: relative;
    z-index: 50;
    will-change: transform;
  }

  /* Content wrapper - isolates text from background blobs */
  .content-wrapper::before {
    content: '';
    position: absolute;
    inset: -50px;
    background: radial-gradient(ellipse at center, rgba(0, 0, 0, 0.2) 0%, transparent 70%);
    backdrop-filter: blur(1px);
    z-index: -1;
    pointer-events: none;
  }

  /* Magnetic text styling */
  .magnetic-text {
    display: inline-block;
    transition: transform 0.1s ease-out;
    will-change: transform;
    transform-style: preserve-3d;
    color: #7661d1 !important;
    filter: drop-shadow(2px 2px 4px rgba(0, 0, 0, 0.6)) drop-shadow(0 0 8px rgba(118, 97, 209, 0.4));
    -webkit-text-stroke: 1px rgba(255, 255, 255, 0.1);
  }

  /* Smooth transition only when actively transforming */
  .magnetic-text[style*='rotate'] {
    transition: transform 0.08s ease-out;
  }

  /* Word styling */
  .word {
    display: inline-block;
    transition: text-shadow 0.5s ease-in-out;
  }

  /* Jiggle animation for words */
  .word.jiggle {
    animation: jiggle 0.3s ease-in-out;
  }

  @keyframes jiggle {
    0%,
    100% {
      transform: translateX(0) translateY(0) rotate(0deg);
    }
    10% {
      transform: translateX(-2px) translateY(-1px) rotate(-1deg);
    }
    20% {
      transform: translateX(2px) translateY(1px) rotate(1deg);
    }
    30% {
      transform: translateX(-1px) translateY(1px) rotate(-0.5deg);
    }
    40% {
      transform: translateX(1px) translateY(-1px) rotate(0.5deg);
    }
    50% {
      transform: translateX(-1px) translateY(-1px) rotate(-0.5deg);
    }
    60% {
      transform: translateX(1px) translateY(1px) rotate(0.5deg);
    }
    70% {
      transform: translateX(-1px) translateY(0px) rotate(-0.3deg);
    }
    80% {
      transform: translateX(1px) translateY(0px) rotate(0.3deg);
    }
    90% {
      transform: translateX(0px) translateY(0px) rotate(0deg);
    }
  }

  /* Liquid blob animations */
  .liquid-blobs {
    filter: blur(40px);
    opacity: 0.9;
    z-index: 1;
  }

  .blob {
    position: absolute;
    border-radius: 50%;
    will-change: transform;
    z-index: 1;
  }

  .blob-1 {
    width: 800px;
    height: 800px;
    background: radial-gradient(circle, rgba(147, 51, 234, 0.95), rgba(79, 70, 229, 0.85));
    top: 5%;
    left: 0%;
    animation: blobFloat1 20s ease-in-out infinite;
  }

  .blob-2 {
    width: 900px;
    height: 900px;
    background: radial-gradient(circle, rgba(79, 70, 229, 0.95), rgba(59, 130, 246, 0.85));
    bottom: 5%;
    right: 0%;
    animation: blobFloat2 25s ease-in-out infinite;
  }

  .blob-3 {
    width: 700px;
    height: 700px;
    background: radial-gradient(circle, rgba(59, 130, 246, 0.9), rgba(37, 99, 235, 0.75));
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    animation: blobFloat3 30s ease-in-out infinite;
  }

  @keyframes blobFloat1 {
    0%,
    100% {
      transform: translate(0, 0) scale(1) rotate(0deg);
    }
    33% {
      transform: translate(120px, 80px) scale(1.2) rotate(120deg);
    }
    66% {
      transform: translate(-60px, 100px) scale(0.9) rotate(240deg);
    }
  }

  @keyframes blobFloat2 {
    0%,
    100% {
      transform: translate(0, 0) scale(1) rotate(0deg);
    }
    33% {
      transform: translate(-100px, -120px) scale(1.3) rotate(120deg);
    }
    66% {
      transform: translate(120px, -60px) scale(0.85) rotate(240deg);
    }
  }

  @keyframes blobFloat3 {
    0%,
    100% {
      transform: translate(-50%, -50%) scale(1) rotate(0deg);
    }
    33% {
      transform: translate(-45%, -60%) scale(1.3) rotate(120deg);
    }
    66% {
      transform: translate(-55%, -40%) scale(0.8) rotate(240deg);
    }
  }

  /* Floating shapes canvas - behind particles but above background */
  #floatingShapesCanvas {
    z-index: 4;
  }

  /* Particle canvas - on top so particles are visible */
  #particleTrail {
    z-index: 5;
  }

  .content-wrapper {
    user-select: none;
    -webkit-user-select: none;
    -ms-user-select: none;
  }

  .content-wrapper * {
    user-select: none;
    -webkit-user-select: none;
    -ms-user-select: none;
    cursor: default;
  }
</style>
