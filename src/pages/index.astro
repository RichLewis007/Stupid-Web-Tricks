---
import Layout from '../layouts/Layout.astro';
import HeroSection from '../components/sections/HeroSection.astro';
import CategoriesSection from '../components/sections/CategoriesSection.astro';
import FeaturesSection from '../components/sections/FeaturesSection.astro';
import FloatingShapesCanvas from '../components/features/FloatingShapesCanvas.astro';
import '../styles/animations.css';
---

<Layout title="Stupid Web Tricks - Amazing Web Effects & Animations">
  <!-- Hero Section with Interactive Background -->
  <HeroSection />
  
  <!-- Categories Section -->
  <CategoriesSection />

  <!-- Features Section -->
  <FeaturesSection />
</Layout>

<!-- Interactive Components -->
<FloatingShapesCanvas />

<script>
  // Animate category cards on scroll using Intersection Observer
  function initCategoryCardAnimations() {
    const cards = document.querySelectorAll<HTMLElement>('.category-card');
    if (cards.length === 0) return;

    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry, index) => {
          if (entry.isIntersecting) {
            const target = entry.target as HTMLElement;
            setTimeout(() => {
              target.style.opacity = '1';
              target.style.transform = 'translateY(0)';
            }, index * 100);
          }
        });
      },
      {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
      }
    );

    // Initialize card styles and observe
    cards.forEach((card) => {
      card.style.opacity = '0';
      card.style.transform = 'translateY(30px)';
      card.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
      observer.observe(card);
    });
  }

  // Initialize when DOM is ready
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initCategoryCardAnimations);
  } else {
    initCategoryCardAnimations();
  }
</script>